import{c as de,j as e,T as s,aT as ce,a4 as ue,bQ as pe,a as xe,t as n,r as h,E as V,bR as he,u as be,H as me,J as ge,B as b,C as fe,y as B,S as P,bS as Ce,x as J,f as E,bp as ye,W as je,aG as ve,aH as _,aJ as j,n as W,ab as A,ac as $,K,aI as Me,A as ke,M as Se,I as Te,bT as Pe,N as we,ar as Ie}from"./index-D1uGZ479.js";const m=de(),De=[m.accessor("amount",{header:"Amount",size:120,Cell:({row:i})=>{const r=i.original.amount;return r?e.jsx(s,{children:r}):e.jsx(s,{fontSize:"12px",component:"em",children:"Empty"})}}),m.accessor("transactionType",{header:"Transaction Type",size:150,Cell:({row:i})=>{const r=i.original.transactionType;return r?e.jsx(s,{children:r}):e.jsx(s,{fontSize:"12px",component:"em",children:"Empty"})}}),m.accessor("paymentMethods",{header:"Payment Methods",size:150,Cell:({row:i})=>{const r=i.original.paymentMethods;return r?e.jsx(s,{children:r}):e.jsx(s,{fontSize:"12px",component:"em",children:"Empty"})}}),m.accessor("transactionReference",{header:"Transaction Reference",size:200,Cell:({row:i})=>{const r=i.original.transactionReference;return r?e.jsx(s,{children:r}):e.jsx(s,{fontSize:"12px",component:"em",children:"Empty"})}}),m.accessor("remark",{header:"Remark",size:100,Cell:({row:i})=>{var x;const r=i.original.remark;return r?((x=r==null?void 0:r.split(" "))==null?void 0:x.length)>5?e.jsx(ce,{Content:pe,contentData:r,type:"icon",btnName:ue}):e.jsx(s,{children:r}):e.jsx(s,{fontSize:"12px",component:"em",children:"Empty"})}}),m.accessor("status",{header:"Status",size:100,Cell:({row:i})=>{const r=i.original.status;return r?e.jsx(s,{children:r}):e.jsx(s,{fontSize:"12px",component:"em",children:"Empty"})}}),m.accessor("createdAt",{header:"Date",size:250,Cell:({row:i})=>e.jsx(s,{children:new Date(i.original.createdAt).toLocaleString()})})],d={primaryTeal:"#14b8a6",darkBlue:"#0d2b5e",white:"#ffffff",lightGray:"#f8fafc",mediumGray:"#e2e8f0",darkGray:"#64748b",textGray:"#475569",backgroundGray:"#f1f5f9"},ze=[{value:"",label:"All Status"},{value:"PENDING",label:"Pending"},{value:"COMPLETED",label:"Completed"},{value:"REJECTED",label:"Rejected"}],Re=[{value:"",label:"All Types"},{value:"WITHDRAW",label:"Withdraw"},{value:"DEPOSIT",label:"Deposit"}],Be=[{value:"",label:"All Methods"},{value:"BANK",label:"Bank"},{value:"CASH",label:"Cash"},{value:"CRYPTO",label:"Crypto"}];function We(){var L,Y,N;const i=xe(),r=d.white,x=d.white,a=d.mediumGray,l=d.darkBlue,c=d.textGray,t=d.primaryTeal,Q=d.lightGray,g=d.backgroundGray,p=d.darkGray,v=d.white,M=n(d.mediumGray,.2),U=n(d.primaryTeal,.04),q=n(d.lightGray,.8),[w,X]=h.useState({pageIndex:0,pageSize:10}),[k,I]=h.useState(""),[u,O]=h.useState({status:"",transactionType:"",paymentMethod:"",fromDate:null,toDate:null}),Z=u.fromDate?V(u.fromDate).format("YYYY-MM-DD"):void 0,ee=u.toDate?V(u.toDate).format("YYYY-MM-DD"):void 0,{data:f,isLoading:S,isError:C,error:D,refetch:oe}=he({page:w.pageIndex+1,sizePerPage:w.pageSize,search:k,...u,fromDate:Z,toDate:ee}),F=(L=D==null?void 0:D.data)==null?void 0:L.message,T=((Y=f==null?void 0:f.data)==null?void 0:Y.depositWithdrawList)||[],z=((N=f==null?void 0:f.data)==null?void 0:N.totalRecords)||0,re=()=>{Ie(T,"DepositWithdrawList.xlsx",i)},G=()=>{oe()},H=()=>{O({status:"",transactionType:"",paymentMethod:"",fromDate:null,toDate:null}),I("")},te=h.useMemo(()=>De,[]),ae=h.useMemo(()=>T,[T]),le=h.useMemo(()=>z,[z]),R=Object.values(u).filter(o=>o!==""&&o!==null).length+(k?1:0),se=be({columns:te,data:C?[]:ae,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:le,muiTablePaperProps:{elevation:0,sx:{border:`1px solid ${a}`,borderRadius:2,overflow:"hidden",background:x,boxShadow:"0 1px 3px rgba(0,0,0,0.05)"}},muiTableHeadRowProps:{sx:{backgroundColor:q}},muiTableHeadCellProps:{sx:{fontWeight:600,fontSize:"0.875rem",py:1.5,color:l,borderBottom:`2px solid ${a}`}},muiTableBodyRowProps:{sx:{"&:hover":{backgroundColor:U},borderBottom:`1px solid ${a}`}},muiTableBodyCellProps:{sx:{py:1.5,fontSize:"0.875rem",color:c,borderBottom:`1px solid ${n(a,.5)}`}},muiPaginationProps:{rowsPerPageOptions:[5,10,25,50],showRowsPerPage:!0,sx:{background:v,borderTop:`1px solid ${a}`,color:c,"& .MuiButtonBase-root":{color:c,"&.Mui-selected":{backgroundColor:n(t,.1),color:t,"&:hover":{backgroundColor:n(t,.2)}}},"& .MuiSelect-select":{color:l},"& .MuiSvgIcon-root":{color:p}}},state:{pagination:w,globalFilter:k,isLoading:S,showAlertBanner:C},onPaginationChange:X,onGlobalFilterChange:I,columnFilterDisplayMode:"popover",paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiToolbarAlertBannerProps:C?{color:"error",children:F||"Error loading deposit and withdrawal transactions.",sx:{backgroundColor:n("#f44336",.08),border:`1px solid ${n("#f44336",.2)}`,color:"#d32f2f"}}:void 0,renderTopToolbar:({table:o})=>e.jsx(b,{sx:{p:2,borderBottom:`1px solid ${a}`,background:Q},children:e.jsxs(P,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(P,{direction:"row",alignItems:"center",spacing:1.5,children:[e.jsx(s,{variant:"subtitle1",sx:{fontWeight:600,color:l},children:"Deposit & Withdrawal Records"}),e.jsx(J,{label:`${z} records`,size:"small",variant:"outlined",sx:{fontSize:"0.75rem",color:c,borderColor:a,backgroundColor:n(d.mediumGray,.3)}})]}),e.jsxs(P,{direction:"row",spacing:1,children:[e.jsx(Te,{onClick:G,size:"small",sx:{border:`1px solid ${a}`,color:p,backgroundColor:x,"&:hover":{backgroundColor:M,borderColor:t,color:t}},children:e.jsx(Pe,{fontSize:"small"})}),e.jsx(E,{variant:"contained",startIcon:e.jsx(we,{}),onClick:re,size:"small",sx:{textTransform:"none",fontWeight:500,backgroundColor:t,color:d.white,boxShadow:`0 2px 8px ${n(t,.2)}`,"&:hover":{backgroundColor:n(t,.9),boxShadow:`0 4px 12px ${n(t,.3)}`}},children:"Export Excel"})]})]})})}),y=h.useCallback((o,ne)=>{O(ie=>({...ie,[o]:ne}))},[]);return e.jsx(me,{dateAdapter:ge,children:e.jsx(b,{sx:{bgcolor:r,minHeight:"100vh",p:{xs:2,md:3}},children:e.jsxs(fe,{maxWidth:"xl",sx:{py:3},children:[e.jsxs(b,{sx:{mb:4},children:[e.jsx(s,{variant:"h5",fontWeight:600,fontSize:"1.5rem",color:l,gutterBottom:!0,children:"Wallet Transactions History"}),e.jsx(s,{variant:"body2",color:c,children:"View and manage all deposit and withdrawal transactions"})]}),e.jsxs(B,{elevation:0,sx:{p:3,mb:3,border:`1px solid ${a}`,borderRadius:2,background:x,boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(P,{direction:"row",alignItems:"center",spacing:1.5,children:[e.jsx(Ce,{sx:{color:p,fontSize:20}}),e.jsx(s,{variant:"subtitle1",fontWeight:600,color:l,children:"Filters"}),R>0&&e.jsx(J,{label:`${R} active`,size:"small",onDelete:H,sx:{color:t,borderColor:t,backgroundColor:n(t,.1)}})]}),R>0&&e.jsx(E,{variant:"text",startIcon:e.jsx(ye,{}),onClick:H,size:"small",sx:{color:p,fontSize:"0.875rem","&:hover":{color:"#d32f2f",backgroundColor:n("#d32f2f",.08)}},children:"Clear All"})]}),e.jsx(b,{sx:{mb:3},children:e.jsx(je,{fullWidth:!0,placeholder:"Search by reference, amount, remark, or any transaction detail...",value:k,onChange:o=>I(o.target.value),size:"medium",InputProps:{startAdornment:e.jsx(ve,{position:"start",children:e.jsx(_,{sx:{color:p}})}),sx:{backgroundColor:g,borderRadius:1,color:l,border:`1px solid ${a}`,"&:hover":{borderColor:t},"&.Mui-focused":{borderColor:t,borderWidth:"2px"},"& .MuiInputBase-input::placeholder":{color:c,opacity:.7},"& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"}}}})}),e.jsxs(j,{container:!0,spacing:2.5,sx:{alignItems:"flex-end"},children:[e.jsx(j,{item:!0,xs:12,sm:6,md:3,children:e.jsx(W,{fullWidth:!0,size:"small",children:e.jsx(A,{value:u.status,onChange:o=>y("status",o.target.value),displayEmpty:!0,sx:{backgroundColor:g,color:l,border:`1px solid ${a}`,borderRadius:1,"& .MuiSelect-icon":{color:p},"& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"&:hover":{borderColor:t},"&.Mui-focused":{borderColor:t,borderWidth:"2px"}},MenuProps:{PaperProps:{sx:{backgroundColor:v,color:l,border:`1px solid ${a}`,"& .MuiMenuItem-root":{"&:hover":{backgroundColor:M}}}}},children:ze.map(o=>e.jsx($,{value:o.value,sx:{color:l},children:o.label},o.value))})})}),e.jsx(j,{item:!0,xs:12,sm:6,md:3,children:e.jsx(W,{fullWidth:!0,size:"small",children:e.jsx(A,{value:u.transactionType,onChange:o=>y("transactionType",o.target.value),displayEmpty:!0,sx:{backgroundColor:g,color:l,border:`1px solid ${a}`,borderRadius:1,"& .MuiSelect-icon":{color:p},"& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"&:hover":{borderColor:t},"&.Mui-focused":{borderColor:t,borderWidth:"2px"}},MenuProps:{PaperProps:{sx:{backgroundColor:v,color:l,border:`1px solid ${a}`,"& .MuiMenuItem-root":{"&:hover":{backgroundColor:M}}}}},children:Re.map(o=>e.jsx($,{value:o.value,sx:{color:l},children:o.label},o.value))})})}),e.jsx(j,{item:!0,xs:12,sm:6,md:3,children:e.jsx(W,{fullWidth:!0,size:"small",children:e.jsx(A,{value:u.paymentMethod,onChange:o=>y("paymentMethod",o.target.value),displayEmpty:!0,sx:{backgroundColor:g,color:l,border:`1px solid ${a}`,borderRadius:1,"& .MuiSelect-icon":{color:p},"& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"&:hover":{borderColor:t},"&.Mui-focused":{borderColor:t,borderWidth:"2px"}},MenuProps:{PaperProps:{sx:{backgroundColor:v,color:l,border:`1px solid ${a}`,"& .MuiMenuItem-root":{"&:hover":{backgroundColor:M}}}}},children:Be.map(o=>e.jsx($,{value:o.value,sx:{color:l},children:o.label},o.value))})})}),e.jsx(j,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{sx:{display:"flex",gap:1},children:[e.jsx(K,{value:u.fromDate,onChange:o=>y("fromDate",o),slotProps:{textField:{size:"small",fullWidth:!0,placeholder:"Start Date",sx:{backgroundColor:g,color:l,border:`1px solid ${a}`,borderRadius:1,"& .MuiInputBase-input":{fontSize:"0.875rem",color:l},"& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"& .MuiInputBase-input::placeholder":{color:c,opacity:.7},"& .MuiIconButton-root":{color:p},"&:hover":{borderColor:t}}},field:{clearable:!0}}}),e.jsx(K,{value:u.toDate,onChange:o=>y("toDate",o),slotProps:{textField:{size:"small",fullWidth:!0,placeholder:"End Date",sx:{backgroundColor:g,color:l,border:`1px solid ${a}`,borderRadius:1,"& .MuiInputBase-input":{fontSize:"0.875rem",color:l},"& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"& .MuiInputBase-input::placeholder":{color:c,opacity:.7},"& .MuiIconButton-root":{color:p},"&:hover":{borderColor:t}}},field:{clearable:!0}}})]})})]})]}),S&&e.jsx(b,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:e.jsx(Me,{sx:{color:t}})}),C&&e.jsx(ke,{severity:"error",sx:{mb:3,backgroundColor:n("#f44336",.08),border:`1px solid ${n("#f44336",.2)}`,color:"#d32f2f"},action:e.jsx(E,{color:"inherit",size:"small",onClick:G,sx:{color:"#d32f2f"},children:"Retry"}),children:F||"Failed to load transactions. Please try again."}),!S&&!C&&e.jsx(B,{elevation:0,sx:{borderRadius:2,overflow:"hidden",border:`1px solid ${a}`,background:x,boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:e.jsx(Se,{table:se})}),!S&&!C&&T.length===0&&e.jsxs(B,{sx:{p:6,textAlign:"center",border:`1px dashed ${a}`,background:x,borderRadius:2,boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:[e.jsx(_,{sx:{fontSize:48,color:c,mb:2,opacity:.5}}),e.jsx(s,{variant:"h6",color:c,gutterBottom:!0,sx:{opacity:.8},children:"No transactions found"}),e.jsx(s,{variant:"body2",color:c,sx:{opacity:.7},children:"Try adjusting your filters or search terms"})]})]})})})}export{We as default};
