import{c as y,j as a,T as f,ae as v,a as S,aq as I,S as m,f as j,s as g,r as C,u as M,M as B,B as T,N as D,ar as R,q as k,b as E,as as A,C as L}from"./index-D1uGZ479.js";import"./OverrideCommissionModal-CYH180fF.js";import"./KeyboardArrowDown-rOuSl0HJ.js";const x=y(),F=[x.accessor("name",{header:"Name",Cell:({row:e})=>{var t,o;return((t=e==null?void 0:e.original)==null?void 0:t.name)?a.jsx(f,{children:(o=e==null?void 0:e.original)==null?void 0:o.name}):a.jsx(f,{component:"em",fontSize:"14px",children:"Empty"})}}),x.accessor("userName",{header:"User name"}),x.accessor("level",{header:"Level"}),x.accessor("isSubIb",{header:"Sub Ib",Cell:({row:e})=>{var n,t;return a.jsx(f,{color:(n=e==null?void 0:e.original)!=null&&n.isSubIb?"green":"red",children:(t=e==null?void 0:e.original)!=null&&t.isSubIb?"Yes":"No"})}}),x.accessor("date",{header:"Date",Cell:({row:e})=>a.jsx(f,{children:new Date(e.original.date).toLocaleString()})}),x.display({id:"action",header:"Action",Cell:({row:e})=>{var l,h,u;const{refetch:n}=v(),t=(l=e==null?void 0:e.original)==null?void 0:l.id,o=!((h=e==null?void 0:e.original)!=null&&h.isSubIb),r=S(),[i,{isLoading:c}]=I(),d=async()=>{var b,p;try{const s=await i({userId:t,isSubIb:o}).unwrap();s!=null&&s.status&&(r(g({open:!0,message:s==null?void 0:s.message,severity:"success"})),n())}catch(s){(b=s==null?void 0:s.data)!=null&&b.status||r(g({open:!0,message:((p=s==null?void 0:s.data)==null?void 0:p.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return a.jsx(m,{sx:{gap:"5px",flexDirection:"row"},children:a.jsx(j,{onClick:d,variant:"contained",disabled:c,sx:{minWidth:"1.5rem",fontSize:"13px",px:"8px",py:"4px"},children:(u=e==null?void 0:e.original)!=null&&u.isSubIb?"Remove Sub IB":"Make Sub IB"})})}})];function N(){var h;const[e,n]=C.useState(""),{data:t,isLoading:o,isError:r}=v(),i=((h=t==null?void 0:t.data)==null?void 0:h.userList)||[],c=C.useMemo(()=>i.filter(u=>{var b,p;return(p=(b=u==null?void 0:u.name)==null?void 0:b.toLowerCase())==null?void 0:p.includes(e==null?void 0:e.toLowerCase())}),[i,e]),d=()=>{R(i,"ReferralClient.xlsx")},l=M({columns:F,data:e?c:i,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,state:{globalFilter:e,isLoading:o,showAlertBanner:r},columnFilterDisplayMode:"popover",onGlobalFilterChange:n,paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",renderTopToolbarCustomActions:()=>a.jsx(T,{sx:{display:"flex",gap:2,padding:1,flexWrap:"wrap"},children:a.jsx(j,{variant:"contained",onClick:d,startIcon:a.jsx(D,{sx:{color:"white"}}),sx:{textTransform:"none",color:"white",boxShadow:"none","&:hover":{boxShadow:"none"}},children:"Excel"})})});return a.jsx(m,{children:a.jsx(m,{sx:{borderRadius:2,overflow:"hidden"},children:a.jsx(B,{table:l})})})}const O=["Client Level 1","Client Level 2","Client Level 3","Client Level 4","Client Level 5","Client Level 6","Client Level 7"];function G(){var c,d;const{token:e}=k(l=>l.auth),{data:n,isLoading:t}=E(void 0,{skip:!e,refetchOnMountOrArgChange:!0});(d=(c=n==null?void 0:n.data)==null?void 0:c.userData)==null||d.name;const[o,r]=C.useState(O[0]),i=S();return C.useCallback(l=>{r(l),i(A(l))},[i]),a.jsx(L,{children:a.jsx(N,{})})}function q(){return a.jsxs(m,{children:[a.jsx(L,{children:a.jsx(f,{variant:"h5",fontWeight:"700",fontSize:"1.8rem",mb:"2rem",children:"My Clients"})}),a.jsx(G,{})]})}export{q as default};
