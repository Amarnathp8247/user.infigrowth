import{bd as V,a8 as D,a9 as X,a6 as J,a as F,bV as K,j as e,S as B,T as o,G as P,V as $,W as ae,f as Y,a7 as L,bW as ee,bE as A,bF as E,s as j,q as H,r as N,bX as oe,B as l,L as re,bY as te,Z as se,bZ as ne,aY as q,aG as Z,I as _,a4 as U,a_ as Q,au as ie,av as M,C as le,y as de}from"./index-D1uGZ479.js";import{C as ce,O as ue}from"./OTPInput-DZMqfUt-.js";import{u as pe}from"./useCountdownTimer-DBqZnIUK.js";const d={primaryTeal:"rgb(20, 184, 166)",primaryTealTransparent:"rgba(20, 184, 166, 0.2)",darkBlue:"#0d2b5e",accentPurple:"#9c27b0",white:"#ffffff",mediumGray:"#e2e8f0",darkGray:"#64748b",textGray:"#475569"},xe=J({email:L().email("Please type a valid email").trim().min(1,"Email is required")});function me(){const[f,g]=V(),n={email:""},{register:S,handleSubmit:k,formState:{errors:y}}=D({resolver:X(xe),defaultValues:n}),m=F(),[w,{isLoading:T}]=K(),C=async b=>{var u,v;try{m(ee(b==null?void 0:b.email));const i=await w(b).unwrap();if(i!=null&&i.status){const O=Date.now(),G=O+2*60*1e3;m(A(O)),m(E(G)),g({forgotPasswordStep:"verifyOTP"}),m(j({open:!0,message:i==null?void 0:i.message,severity:"success"}))}}catch(i){(u=i==null?void 0:i.data)!=null&&u.status||m(j({open:!0,message:((v=i==null?void 0:i.data)==null?void 0:v.message)||"Failed to sign in. Please try again later.",severity:"error"}))}};return e.jsxs(B,{component:"form",onSubmit:k(C),spacing:3,children:[e.jsx(o,{sx:{fontSize:"1.7rem",fontWeight:"700",color:d.darkBlue},children:"Reset Password"}),e.jsx(o,{sx:{color:d.textGray,fontSize:"14px",lineHeight:1.6,fontWeight:400},children:"Enter your email address below and we'll send you instructions to reset your password."}),e.jsx(P,{container:!0,spacing:2,children:e.jsxs(P,{size:{xs:12},children:[e.jsx($,{sx:{mb:".5rem",fontSize:"14px",fontWeight:600,color:d.darkBlue},children:"Email Address"}),e.jsx(ae,{...S("email",{required:!0}),fullWidth:!0,size:"small",sx:{backgroundColor:d.white,borderRadius:"8px","& .MuiOutlinedInput-root":{color:d.textGray,"& fieldset":{borderColor:d.mediumGray},"&:hover fieldset":{borderColor:d.primaryTeal},"&.Mui-focused fieldset":{borderColor:d.primaryTeal,borderWidth:"2px"}},"& .MuiInputLabel-root":{color:d.textGray},"& .MuiInputLabel-root.Mui-focused":{color:d.primaryTeal}}}),y.email&&e.jsx(o,{sx:{color:d.accentPurple,fontSize:"12px",mt:.5,fontWeight:500},children:y.email.message})]})}),e.jsx(Y,{fullWidth:!0,variant:"contained",type:"submit",disabled:T,sx:{mt:"1rem",textTransform:"none",boxShadow:"none",backgroundColor:d.primaryTeal,color:d.white,py:".8rem",fontWeight:600,fontSize:"16px",borderRadius:"8px",transition:"all 0.3s ease","&:hover":{backgroundColor:d.darkBlue,boxShadow:`0 6px 12px ${d.primaryTealTransparent}`,transform:"translateY(-2px)"},"&:disabled":{backgroundColor:d.mediumGray,color:d.darkGray,transform:"none",boxShadow:"none"}},children:T?"Sending Instructions...":"Continue"})]})}const s={primaryTeal:"rgb(20, 184, 166)",primaryTealTransparent:"rgba(20, 184, 166, 0.2)",darkBlue:"#0d2b5e",white:"#ffffff",lightGray:"#f8fafc",darkGray:"#64748b",textGray:"#475569"};function he(){const[f,g]=V(),n=F(),{resendOtpCreatedTime:S,resendOtpExpiryTime:k}=H(c=>c.auth),y=pe(S,k,()=>{n(A(null)),n(E(null))}),m=y<=0,w=c=>{const h=String(Math.floor(c/60)).padStart(2,"0"),p=String(c%60).padStart(2,"0");return`${h}:${p}`},{emailOnOTPSent:T}=H(c=>c.auth),C=N.useRef(!1),b={email:T,otp:""},{handleSubmit:u,setValue:v,watch:i}=D({defaultValues:b}),[O]=oe(),G=async c=>{var h,p;try{const a=await O(c).unwrap();a!=null&&a.status&&(n(te(a==null?void 0:a.data)),n(ee("")),n(A(null)),n(E(null)),g({forgotPasswordStep:"enterNewPassword"}),n(j({open:!0,message:a==null?void 0:a.message,severity:"success"})))}catch(a){(h=a==null?void 0:a.data)!=null&&h.status||n(j({open:!0,message:((p=a==null?void 0:a.data)==null?void 0:p.message)||"Failed to submit. Please try again later.",severity:"error"}))}finally{C.current=!1}},[W]=K(),z=async()=>{var c,h;try{const a=await W({email:T}).unwrap();if(a!=null&&a.status){const R=Date.now(),I=R+2*60*1e3;n(A(R)),n(E(I)),n(j({open:!0,message:a==null?void 0:a.message,severity:"success"}))}}catch(p){(c=p==null?void 0:p.data)!=null&&c.status||n(j({open:!0,message:((h=p==null?void 0:p.data)==null?void 0:h.message)||"Failed to sign in. Please try again later.",severity:"error"}))}};return e.jsxs(B,{spacing:3,children:[e.jsxs(l,{textAlign:"center",children:[e.jsx(o,{variant:"h5",fontWeight:"700",color:s.darkBlue,gutterBottom:!0,children:"Enter Verification Code"}),e.jsxs(o,{variant:"body2",color:s.textGray,sx:{fontWeight:400},children:["Sent to: ",e.jsx(l,{component:"span",fontWeight:"600",color:s.darkBlue,children:T})]})]}),e.jsxs(l,{sx:{display:"flex",alignItems:"flex-start",gap:1.5,p:2,backgroundColor:s.lightGray,borderRadius:"8px",border:`1px solid ${s.primaryTeal}`,mb:1,transition:"all 0.3s ease","&:hover":{backgroundColor:s.primaryTealTransparent,transform:"translateY(-2px)",boxShadow:`0 4px 12px ${s.primaryTealTransparent}`}},children:[e.jsx(ce,{sx:{color:s.primaryTeal,fontSize:"20px",mt:.25}}),e.jsx(o,{variant:"body2",color:s.textGray,sx:{fontWeight:500},children:"Enter the 6-digit verification code sent to your email address"})]}),e.jsx(l,{sx:{mt:2},children:e.jsx(l,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(ue,{value:i("otp"),onComplete:c=>{v("otp",c),C.current||(C.current=!0,u(G)())}})})}),e.jsx(l,{sx:{mt:3,textAlign:"center"},children:m?e.jsx(o,{onClick:z,sx:{cursor:"pointer",color:s.primaryTeal,fontWeight:600,fontSize:"0.9rem",transition:"all 0.3s ease",display:"inline-block",padding:"4px 8px",borderRadius:"4px","&:hover":{color:s.darkBlue,textDecoration:"underline",backgroundColor:s.primaryTealTransparent,transform:"scale(1.05)"}},children:"Resend Verification Code"}):e.jsxs(o,{variant:"body2",color:s.textGray,sx:{fontWeight:500},children:["Resend in: ",e.jsx(l,{component:"span",fontWeight:"600",color:s.primaryTeal,children:w(y)})]})}),e.jsx(Y,{variant:"contained",fullWidth:!0,onClick:u(G),sx:{mt:2,py:1.2,borderRadius:"8px",textTransform:"none",fontWeight:600,fontSize:"16px",backgroundColor:s.primaryTeal,color:s.white,transition:"all 0.3s ease","&:hover":{backgroundColor:s.darkBlue,boxShadow:`0 6px 12px ${s.primaryTealTransparent}`,transform:"translateY(-2px)"}},children:"Verify Code"}),e.jsxs(o,{variant:"body2",color:s.darkGray,textAlign:"center",sx:{mt:1,fontWeight:500},children:["Code not received?"," ",e.jsx(o,{component:re,to:"#",variant:"body2",onClick:z,sx:{color:s.primaryTeal,fontWeight:600,textDecoration:"none",cursor:"pointer",transition:"all 0.3s ease",display:"inline-block","&:hover":{textDecoration:"underline",color:s.darkBlue,transform:"scale(1.05)"}},children:"Try resending"})]})]})}const r={primaryTeal:"rgb(20, 184, 166)",primaryTealTransparent:"rgba(20, 184, 166, 0.2)",darkBlue:"#0d2b5e",accentPurple:"#9c27b0",white:"#ffffff",mediumGray:"#e2e8f0",darkGray:"#64748b",textGray:"#475569"},fe=J({newPassword:L().min(8,"Password must be at least 8 characters").max(15,"Password must be at most 15 characters").regex(/[a-z]/,"Must include at least one lowercase letter").regex(/[A-Z]/,"Must include at least one uppercase letter").regex(/\d/,"Must include at least one number").regex(/[^a-zA-Z0-9]/,"Must include at least one special character"),cnfPassword:L().min(1,"Confirm password is required")}).refine(f=>f.newPassword===f.cnfPassword,{path:["cnfPassword"],message:"Passwords do not match"});function ge(){const[f,g]=N.useState(!1),[n,S]=N.useState(!1),k=()=>g(a=>!a),y=()=>S(a=>!a),m={newPassword:"",cnfPassword:""},{register:w,watch:T,handleSubmit:C,formState:{errors:b}}=D({resolver:X(fe),defaultValues:m}),u=T("newPassword"),v=(u==null?void 0:u.length)>=8&&u.length<=15,i=/[a-z]/.test(u)&&/[A-Z]/.test(u),O=/\d/.test(u),G=/[^a-zA-Z0-9]/.test(u),W=F(),z=se(),[c,{isLoading:h}]=ne(),p=async a=>{var R,I;try{const x=await c(a).unwrap();x!=null&&x.status&&(z("/accounts/signIn"),W(j({open:!0,message:x==null?void 0:x.message,severity:"success"})),W(te(null)))}catch(x){(R=x==null?void 0:x.data)!=null&&R.status||W(j({open:!0,message:((I=x==null?void 0:x.data)==null?void 0:I.message)||"Failed to sign in. Please try again later.",severity:"error"}))}};return e.jsxs(B,{component:"form",onSubmit:C(p),spacing:3,children:[e.jsxs(B,{spacing:1,children:[e.jsx(o,{sx:{fontSize:"1.7rem",fontWeight:"700",color:r.darkBlue},children:"Reset Password"}),e.jsx(o,{sx:{fontWeight:"600",color:r.textGray,fontSize:"0.95rem"},children:"Enter a new password twice"})]}),e.jsxs(P,{container:!0,spacing:2,mt:"1rem",children:[e.jsxs(P,{size:{xs:12},children:[e.jsx($,{sx:{mb:".5rem",fontSize:"14px",fontWeight:600,color:r.darkBlue},children:"New Password"}),e.jsx(q,{size:"small",fullWidth:!0,...w("newPassword",{required:!0}),type:f?"text":"password",sx:{backgroundColor:r.white,borderRadius:"8px",color:r.textGray,"& .MuiOutlinedInput-notchedOutline":{borderColor:r.mediumGray},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:r.primaryTeal},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:r.primaryTeal,borderWidth:"2px"}},endAdornment:e.jsx(Z,{position:"end",children:e.jsx(_,{"aria-label":"toggle visibility",onClick:k,edge:"end",sx:{color:r.darkGray,"&:hover":{color:r.primaryTeal,backgroundColor:r.primaryTealTransparent}},children:f?e.jsx(U,{}):e.jsx(Q,{})})})}),e.jsxs(B,{sx:{flexDirection:"row",justifyContent:"space-between",mt:2},children:[e.jsxs(ie,{sx:{listStyleType:"disc",pl:2,py:0},children:[e.jsx(M,{sx:{display:"list-item",p:0,mb:.5},children:e.jsx(o,{sx:{fontSize:"12px",fontWeight:500,color:v?r.primaryTeal:r.accentPurple},children:"Between 8â€“15 characters"})}),e.jsx(M,{sx:{display:"list-item",p:0,mb:.5},children:e.jsx(o,{sx:{fontSize:"12px",fontWeight:500,color:i?r.primaryTeal:r.accentPurple},children:"At least one upper and one lower case letter"})}),e.jsx(M,{sx:{display:"list-item",p:0,mb:.5},children:e.jsx(o,{sx:{fontSize:"12px",fontWeight:500,color:O?r.primaryTeal:r.accentPurple},children:"At least one number"})}),e.jsx(M,{sx:{display:"list-item",p:0},children:e.jsx(o,{sx:{fontSize:"12px",fontWeight:500,color:G?r.primaryTeal:r.accentPurple},children:"At least one special character"})})]}),e.jsxs(o,{sx:{color:r.darkBlue,fontWeight:600,fontSize:"14px"},children:[[v,i,O,G].filter(Boolean).length,"/4"]})]})]}),e.jsxs(P,{size:{xs:12},children:[e.jsx($,{sx:{mb:".5rem",fontSize:"14px",fontWeight:600,color:r.darkBlue},children:"Confirm New Password"}),e.jsx(q,{size:"small",...w("cnfPassword",{required:!0}),fullWidth:!0,type:n?"text":"password",sx:{backgroundColor:r.white,borderRadius:"8px",color:r.textGray,"& .MuiOutlinedInput-notchedOutline":{borderColor:r.mediumGray},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:r.primaryTeal},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:r.primaryTeal,borderWidth:"2px"}},endAdornment:e.jsx(Z,{position:"end",children:e.jsx(_,{"aria-label":"toggle visibility",onClick:y,edge:"end",sx:{color:r.darkGray,"&:hover":{color:r.primaryTeal,backgroundColor:r.primaryTealTransparent}},children:n?e.jsx(U,{}):e.jsx(Q,{})})})}),b.cnfPassword&&e.jsx(o,{sx:{color:r.accentPurple,fontSize:"12px",mt:.5,fontWeight:500},children:b.cnfPassword.message})]})]}),e.jsx(Y,{fullWidth:!0,variant:"contained",type:"submit",disabled:h,sx:{mt:"2rem",textTransform:"none",boxShadow:"none",backgroundColor:r.primaryTeal,color:r.white,py:".8rem",fontWeight:600,fontSize:"16px",borderRadius:"8px",transition:"all 0.3s ease","&:hover":{backgroundColor:r.darkBlue,boxShadow:`0 6px 12px ${r.primaryTealTransparent}`,transform:"translateY(-2px)"},"&:disabled":{backgroundColor:r.mediumGray,color:r.darkGray,transform:"none",boxShadow:"none"}},children:h?"Changing Password...":"Change Password"})]})}const t={primaryTeal:"rgb(20, 184, 166)",primaryTealTransparent:"rgba(20, 184, 166, 0.2)",darkBlue:"#0d2b5e",lightBlue:"#5dade2",white:"#ffffff",lightGray:"#f8fafc",mediumGray:"#e2e8f0",textGray:"#475569",backgroundGray:"#f1f5f9"},ye="infi growth",be="INFI GROWTH",we=["ðŸ”’ Secure password recovery","âš¡ Quick verification process","ðŸ” End-to-end encryption","ðŸ“± Access from any device"];function Se(){const[f]=V(),g=f.get("forgotPasswordStep")||"sendOTP",n={sendOTP:me,verifyOTP:he,enterNewPassword:ge},S={sendOTP:"Reset Password",verifyOTP:"Verify OTP",enterNewPassword:"Create New Password"},k={sendOTP:"Enter your email to receive a verification code",verifyOTP:"Enter the verification code sent to your email",enterNewPassword:"Create a strong new password for your account"},y=n[g];return e.jsxs(l,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:t.backgroundGray,background:`linear-gradient(135deg, ${t.backgroundGray} 0%, ${t.lightGray} 100%)`,position:"relative",overflow:"hidden"},children:[e.jsx(l,{sx:{position:"absolute",top:"10%",left:"5%",width:"300px",height:"300px",borderRadius:"50%",background:`radial-gradient(circle, ${t.primaryTealTransparent} 0%, transparent 70%)`,opacity:.3,zIndex:0}}),e.jsx(l,{sx:{position:"absolute",bottom:"15%",right:"10%",width:"200px",height:"200px",borderRadius:"50%",background:`radial-gradient(circle, ${t.lightBlue}15 0%, transparent 70%)`,opacity:.2,zIndex:0}}),e.jsx(le,{maxWidth:"lg",sx:{position:"relative",zIndex:1},children:e.jsxs(P,{container:!0,spacing:4,alignItems:"center",children:[e.jsx(P,{size:{xs:12,md:6},children:e.jsxs(l,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",pr:{md:4}},children:[e.jsx(o,{variant:"h2",component:"h1",fontWeight:"800",gutterBottom:!0,sx:{color:t.darkBlue,mb:2,fontSize:{xs:"2rem",md:"2.5rem",lg:"3rem"},position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",bottom:"-8px",left:0,width:"60px",height:"4px",background:t.primaryTeal,borderRadius:"2px"}},children:be}),e.jsxs(o,{variant:"h6",color:t.textGray,sx:{mb:4,lineHeight:1.6,fontWeight:400},children:["Reset your password securely and regain access to your ",ye," account. Our recovery process ensures your account stays protected."]}),e.jsxs(l,{sx:{mb:4},children:[e.jsx(o,{variant:"h6",fontWeight:"600",gutterBottom:!0,color:t.darkBlue,sx:{position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",bottom:"-4px",left:0,width:"40px",height:"3px",background:t.primaryTeal,borderRadius:"2px"}},children:"Secure Password Recovery"}),e.jsx(l,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:1.5,mt:2},children:we.map((m,w)=>e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1.5,padding:"12px",backgroundColor:t.white,borderRadius:"8px",border:`1px solid ${t.mediumGray}`,transition:"all 0.3s ease","&:hover":{backgroundColor:t.lightGray,borderColor:t.primaryTeal,transform:"translateY(-2px)",boxShadow:`0 4px 12px ${t.primaryTealTransparent}`}},children:[e.jsx(l,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:t.primaryTeal,flexShrink:0}}),e.jsx(o,{variant:"body1",color:t.textGray,sx:{fontWeight:500},children:m})]},w))})]})]})}),e.jsx(P,{size:{xs:12,md:6},children:e.jsxs(de,{sx:{width:"100%",maxWidth:"450px",borderRadius:3,overflow:"hidden",ml:{md:"auto"},boxShadow:"0 10px 30px rgba(0, 0, 0, 0.08)",backgroundColor:t.white,border:`1px solid ${t.mediumGray}`,position:"relative",transition:"all 0.3s ease","&:hover":{boxShadow:`0 20px 40px rgba(0, 0, 0, 0.12), 0 0 0 1px ${t.primaryTealTransparent}`,transform:"translateY(-5px)"},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"2px",background:`linear-gradient(90deg, transparent, ${t.primaryTeal}, transparent)`,borderRadius:"3px 3px 0 0"}},children:[e.jsxs(l,{sx:{p:3,backgroundColor:t.white,textAlign:"center",borderBottom:`1px solid ${t.mediumGray}`},children:[e.jsx(o,{variant:"h5",component:"h2",fontWeight:"700",gutterBottom:!0,color:t.darkBlue,children:S[g]}),e.jsx(o,{variant:"body2",color:t.textGray,sx:{mb:2,fontWeight:400},children:k[g]})]}),e.jsx(l,{sx:{p:3,backgroundColor:t.white,minHeight:"250px"},children:e.jsx(y,{})}),e.jsx(l,{sx:{p:2.5,borderTop:`1px solid ${t.mediumGray}`,backgroundColor:t.white,textAlign:"center"},children:e.jsxs(o,{variant:"body2",color:t.textGray,children:["Remember your password?"," ",e.jsx(o,{component:re,to:"/accounts/signIn",variant:"body2",sx:{color:t.primaryTeal,fontWeight:600,textDecoration:"none",transition:"all 0.3s ease",display:"inline-block","&:hover":{textDecoration:"underline",color:t.darkBlue,transform:"scale(1.05)"}},children:"Sign in now"})]})})]})})]})})]})}export{Se as default};
