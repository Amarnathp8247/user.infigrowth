import{a6 as P,a7 as p,bc as De,Z as Fe,bd as qe,m as Ve,r as M,a as Ne,q as Qe,b as Je,a8 as Ze,a9 as Ke,be as Xe,t as o,j as e,B as s,C as Ye,P as _e,S as y,T as l,y as L,aJ as $,v as j,I as k,w as S,f as ce,b6 as er,A as de,x as w,V as D,W as F,aI as rr,U as or,s as me}from"./index-D1uGZ479.js";import{C as tr}from"./CheckCircle-FNLtkmtk.js";import{E as ir}from"./ErrorOutline-BvOypDnk.js";import{A as sr}from"./AccountBalance-B4lny5S3.js";import{S as nr}from"./Security-Dsfonr2F.js";import{G as ar}from"./GppGood-DmKznPty.js";import{C as ue}from"./Card-k7dLw_5a.js";const lr=b=>De(u=>u===""?void 0:u,b),cr=({securityMethod:b,isAmountAndRemarkSubmittedParam:u})=>b==="GOOGLE-AUTH"?P({amount:p().min(1,"Amount is required"),remark:p().min(3,"Remark must be at least 3 characters"),code:p().min(6,"Google Auth code must be at least 6 digits")}):u?P({code:p().min(6,"Verification code must be at least 6 digits")}):P({amount:p().min(1,"Amount is required"),remark:p().min(3,"Remark must be at least 3 characters"),code:lr(p().optional())}),t={primaryTeal:"#14b8a6",primaryBlue:"#1a5fb4",darkBlue:"#0d2b5e",white:"#ffffff",mediumGray:"#e2e8f0",textGray:"#475569",backgroundGray:"#f1f5f9"};function br(){var oe,te,ie,se,ne,ae;const b=Fe(),[u,q]=qe(),r=Ve("(max-width:600px)"),[V,N]=M.useState(null),[xe,he]=M.useState(""),C=u.get("amount"),z=u.get("remark"),h=u.get("isAmountAndRemarkSubmitted")||!1,Q=Ne(),{token:pe}=Qe(n=>n.auth),{refetch:fe,data:O}=Je(void 0,{skip:!pe,refetchOnMountOrArgChange:!0}),i=(te=(oe=O==null?void 0:O.data)==null?void 0:oe.userData)==null?void 0:te.securityMethods,be=M.useMemo(()=>cr({securityMethod:i,isAmountAndRemarkSubmittedParam:h}),[i,h]),J={amount:C||"",code:"",remark:z||""},{register:I,handleSubmit:ge,reset:ye,watch:T,formState:{errors:f,isValid:je}}=Ze({resolver:Ke(be),defaultValues:J,mode:"onChange"}),[ke,{isLoading:E,isError:Se,error:v}]=Xe(),g=(n,A)=>{N(n.currentTarget),he(A)},we=()=>{N(null)},Z=!!V,Ce=Z?"withdrawal-info-popover":void 0,ve=`• Bank withdrawals are processed within 1-3 business days
• Security verification required for all withdrawals
• Ensure your bank account details are up-to-date
• Minimum withdrawal amount may apply`,Ge=`• Enter the amount you wish to withdraw
• Amount should be in USD
• Check available balance before withdrawal
• Processing time: 1-3 business days`,Ae=`• Add any notes for the withdrawal
• Purpose of withdrawal
• Bank account reference
• Any special instructions`,Be=i==="GOOGLE-AUTH"?`• Enter the 6-digit code from Google Authenticator
• Code refreshes every 30 seconds
• Ensure your device time is synchronized
• For enhanced security`:`• Enter the verification code sent to you
• Check your email or SMS
• Code is valid for 10 minutes
• Required for security verification`,ze=`• Amount: ${T("amount")||C||"0.00"} USD
• Processing: 1-3 business days
• Security: ${i==="GOOGLE-AUTH"?"Google Authenticator":"Verification Code"}
• Status: Pending verification`,Oe=()=>{b(-1)},Ie=async n=>{var A,le;try{const x=h?{amount:C,remark:z,code:n==null?void 0:n.code}:n,H=await ke(x).unwrap();if(H!=null&&H.status){if(!h&&i!=="GOOGLE-AUTH")q({amount:n==null?void 0:n.amount,remark:n==null?void 0:n.remark,isAmountAndRemarkSubmitted:!0});else{const B=new URLSearchParams(u);B.delete("amount"),B.delete("remark"),B.delete("isAmountAndRemarkSubmitted"),q(B)}Q(me({open:!0,message:"Withdrawal request submitted successfully!",severity:"success"})),ye(J),fe()}}catch(x){(A=x==null?void 0:x.data)!=null&&A.status||Q(me({open:!0,message:((le=x==null?void 0:x.data)==null?void 0:le.message)||"Failed to submit. Please try again.",severity:"error"}))}},W=T("amount")||C,Te=W?parseFloat(W).toFixed(2):"0.00",Ee=t.white,G=t.white,d=t.mediumGray,m=t.darkBlue,c=t.textGray,a=t.primaryTeal,K=o(t.primaryBlue,.08),X=o(t.primaryBlue,.2),We=o("#ed6c02",.08),Re=o("#ed6c02",.2),Ue=o("#2e7d32",.08),He=o("#2e7d32",.2),Pe=o(t.primaryTeal,.08),Me=o(t.primaryTeal,.2),Le=o(t.primaryTeal,.08),$e=o(t.primaryTeal,.2),Y=o("#2e7d32",.08),_=o("#2e7d32",.2),R=o(t.primaryBlue,.08),U=o(t.primaryBlue,.2),ee=o("#ed6c02",.08),re=o("#ed6c02",.2);return e.jsx(s,{sx:{bgcolor:Ee,minHeight:"100vh",p:{xs:2,md:3}},children:e.jsxs(Ye,{maxWidth:"lg",sx:{py:r?1.5:3,height:"100%",overflow:"hidden",px:r?1.5:3},children:[e.jsx(_e,{id:Ce,open:Z,anchorEl:V,onClose:we,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{p:2,maxWidth:300,borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.1)",border:`1px solid ${d}`,bgcolor:G}},children:e.jsxs(y,{spacing:1,children:[e.jsx(l,{variant:"subtitle2",fontWeight:600,color:a,children:"Information"}),e.jsx(l,{variant:"body2",color:c,sx:{whiteSpace:"pre-line",fontSize:"0.8rem"},children:xe})]})}),e.jsxs(s,{sx:{height:"calc(100vh - 40px)",display:"flex",flexDirection:"column",gap:1.5},children:[e.jsx(L,{elevation:0,sx:{p:r?1.2:2,borderRadius:1.5,border:`1px solid ${d}`,backgroundColor:G,boxShadow:"0 1px 3px rgba(0,0,0,0.05)",flexShrink:0},children:e.jsxs($,{container:!0,alignItems:"center",spacing:1.5,children:[e.jsx($,{item:!0,xs:8,sm:9,children:e.jsxs(y,{direction:"row",alignItems:"center",spacing:1.2,children:[e.jsx(s,{sx:{width:36,height:36,borderRadius:1.5,bgcolor:Pe,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${Me}`},children:e.jsx(sr,{sx:{color:a,fontSize:r?"1.2rem":"1.5rem"}})}),e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(l,{variant:r?"h6":"h5",fontWeight:600,color:m,children:"Bank Withdrawal"}),e.jsx(j,{title:"Withdrawal information",children:e.jsx(k,{size:"small",onClick:n=>g(n,ve),sx:{color:a,p:.3,"&:hover":{bgcolor:o(a,.1)}},children:e.jsx(S,{fontSize:"small"})})})]}),e.jsx(l,{variant:"caption",color:c,children:"Withdraw funds securely to your bank account"})]})]})}),e.jsx($,{item:!0,xs:4,sm:3,sx:{textAlign:"right"},children:e.jsx(ce,{variant:"outlined",size:r?"small":"medium",startIcon:e.jsx(er,{}),onClick:Oe,sx:{textTransform:"none",borderRadius:1.2,px:r?1.2:2,borderColor:d,color:c,fontSize:r?"0.8rem":"0.875rem","&:hover":{borderColor:a,color:a,backgroundColor:o(a,.08)}},children:r?"":"Back"})})]})}),i&&e.jsx(de,{severity:i==="GOOGLE-AUTH"?"success":"info",sx:{borderRadius:1.2,border:`1px solid ${i==="GOOGLE-AUTH"?He:X}`,backgroundColor:i==="GOOGLE-AUTH"?Ue:K,flexShrink:0},icon:i==="GOOGLE-AUTH"?e.jsx(ar,{}):e.jsx(nr,{}),children:e.jsx(l,{variant:"caption",color:m,children:i==="GOOGLE-AUTH"?"Using Google Authenticator for enhanced security. Please enter the 6-digit code from your authenticator app.":"Verification code required for security. Check your email or SMS for the code."})}),e.jsxs(s,{sx:{flex:1,display:"flex",flexDirection:r?"column":"row",gap:1.5,overflow:"hidden"},children:[e.jsxs(L,{elevation:0,sx:{flex:r?1:2,p:r?1.2:2,borderRadius:1.5,border:`1px solid ${d}`,backgroundColor:G,boxShadow:"0 1px 3px rgba(0,0,0,0.05)",display:"flex",flexDirection:"column",overflow:"hidden",minHeight:r?"400px":"auto"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,pb:1.2,borderBottom:`1px solid ${d}`,flexShrink:0},children:[e.jsx(l,{variant:"h6",fontWeight:600,color:m,children:"Withdrawal Details"}),e.jsxs(y,{direction:"row",spacing:.5,children:[e.jsx(w,{label:i==="GOOGLE-AUTH"?"Google Auth":"Code Required",size:"small",variant:"outlined",sx:{fontSize:"0.65rem",height:22,borderColor:i==="GOOGLE-AUTH"?_:re,color:i==="GOOGLE-AUTH"?"#4caf50":"#ff9800",backgroundColor:i==="GOOGLE-AUTH"?Y:ee,"& .MuiChip-icon":{color:i==="GOOGLE-AUTH"?"#4caf50":"#ff9800"}}}),e.jsx(w,{label:"1-3 days",size:"small",variant:"outlined",sx:{fontSize:"0.65rem",height:22,borderColor:U,color:t.primaryBlue,backgroundColor:R,"& .MuiChip-icon":{color:t.primaryBlue}}})]})]}),e.jsxs(s,{sx:{flex:1,overflow:"auto",pr:r?.5:0,"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:d,borderRadius:"2px"}},children:[Se&&((ie=v==null?void 0:v.data)==null?void 0:ie.message)&&e.jsx(de,{severity:"error",sx:{mb:1.5,borderRadius:1.2,"& .MuiAlert-icon":{alignItems:"center"},bgcolor:o("#f44336",.08),border:`1px solid ${o("#f44336",.2)}`,color:"#d32f2f",fontSize:r?"0.8rem":"0.875rem"},icon:e.jsx(ir,{fontSize:"small"}),children:v.data.message}),e.jsxs(y,{component:"form",onSubmit:ge(Ie),spacing:2,sx:{pb:1},children:[(i==="GOOGLE-AUTH"||!h)&&e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:.8},children:[e.jsx(D,{sx:{fontWeight:500,color:m,fontSize:r?"0.8rem":"0.85rem",m:0},children:"Amount (USD) *"}),e.jsx(j,{title:"Amount information",children:e.jsx(k,{size:"small",onClick:n=>g(n,Ge),sx:{color:t.primaryBlue,p:.3,"&:hover":{bgcolor:o(t.primaryBlue,.1)}},children:e.jsx(S,{fontSize:"small"})})})]}),e.jsx(F,{...I("amount"),size:"small",fullWidth:!0,placeholder:"Enter withdrawal amount",variant:"outlined",type:"number",inputProps:{min:0,step:"0.01"},sx:{borderRadius:1.2,backgroundColor:o(t.backgroundGray,.5),"& .MuiOutlinedInput-root":{borderRadius:1.2,color:m,"& fieldset":{borderColor:d},"&:hover fieldset":{borderColor:a},"&.Mui-focused fieldset":{borderColor:a,borderWidth:"2px"}},"& .MuiInputBase-input::placeholder":{color:c,opacity:.7},"& .MuiInputBase-input":{fontSize:r?"0.9rem":"1rem"}},error:!!f.amount,helperText:(se=f.amount)==null?void 0:se.message,FormHelperTextProps:{sx:{fontSize:r?"0.75rem":"0.8rem"}}})]}),(i==="GOOGLE-AUTH"||!h)&&e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:.8},children:[e.jsx(D,{sx:{fontWeight:500,color:m,fontSize:r?"0.8rem":"0.85rem",m:0},children:"Remarks *"}),e.jsx(j,{title:"Remarks information",children:e.jsx(k,{size:"small",onClick:n=>g(n,Ae),sx:{color:t.primaryBlue,p:.3,"&:hover":{bgcolor:o(t.primaryBlue,.1)}},children:e.jsx(S,{fontSize:"small"})})})]}),e.jsx(F,{...I("remark"),size:"small",multiline:!0,rows:r?2:3,fullWidth:!0,placeholder:"Enter any notes or remarks about this withdrawal...",variant:"outlined",sx:{borderRadius:1.2,backgroundColor:o(t.backgroundGray,.5),"& .MuiOutlinedInput-root":{borderRadius:1.2,color:m,"& fieldset":{borderColor:d},"&:hover fieldset":{borderColor:a},"&.Mui-focused fieldset":{borderColor:a,borderWidth:"2px"}},"& .MuiInputBase-input::placeholder":{color:c,opacity:.7},"& .MuiInputBase-input":{fontSize:r?"0.9rem":"1rem"}},error:!!f.remark,helperText:(ne=f.remark)==null?void 0:ne.message,FormHelperTextProps:{sx:{fontSize:r?"0.75rem":"0.8rem"}}})]}),(i==="GOOGLE-AUTH"||h)&&e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:.8},children:[e.jsxs(D,{sx:{fontWeight:500,color:m,fontSize:r?"0.8rem":"0.85rem",m:0},children:[i==="GOOGLE-AUTH"?"Google Authenticator Code":"Verification Code"," *"]}),e.jsx(j,{title:"Code information",children:e.jsx(k,{size:"small",onClick:n=>g(n,Be),sx:{color:t.primaryBlue,p:.3,"&:hover":{bgcolor:o(t.primaryBlue,.1)}},children:e.jsx(S,{fontSize:"small"})})})]}),e.jsx(F,{...I("code"),size:"small",fullWidth:!0,placeholder:`Enter ${i==="GOOGLE-AUTH"?"6-digit Google Authenticator code":"verification code"}`,variant:"outlined",sx:{borderRadius:1.2,backgroundColor:o(t.backgroundGray,.5),"& .MuiOutlinedInput-root":{borderRadius:1.2,color:m,"& fieldset":{borderColor:d},"&:hover fieldset":{borderColor:a},"&.Mui-focused fieldset":{borderColor:a,borderWidth:"2px"}},"& .MuiInputBase-input::placeholder":{color:c,opacity:.7},"& .MuiInputBase-input":{fontSize:r?"0.9rem":"1rem"}},error:!!f.code,helperText:(ae=f.code)==null?void 0:ae.message,FormHelperTextProps:{sx:{fontSize:r?"0.75rem":"0.8rem"}}})]}),e.jsx(s,{sx:{mt:.5,flexShrink:0},children:e.jsx(ce,{type:"submit",variant:"contained",disabled:E||!je,fullWidth:!0,size:r?"medium":"large",startIcon:E?e.jsx(rr,{size:r?16:20,color:"inherit"}):e.jsx(tr,{}),sx:{textTransform:"none",borderRadius:1.2,py:r?.8:1.2,fontSize:r?"0.85rem":"0.95rem",fontWeight:600,backgroundColor:a,color:t.white,boxShadow:`0 2px 12px ${o(a,.2)}`,"&:hover":{backgroundColor:o(a,.9),boxShadow:`0 4px 16px ${o(a,.3)}`},"&:disabled":{opacity:.6,backgroundColor:o(a,.3)}},children:E?"Processing...":"Submit Withdrawal Request"})})]})]})]}),e.jsxs(L,{elevation:0,sx:{flex:1,p:r?1.2:2,borderRadius:1.5,border:`1px solid ${d}`,backgroundColor:G,boxShadow:"0 1px 3px rgba(0,0,0,0.05)",display:"flex",flexDirection:"column",overflow:"hidden",minHeight:r?"300px":"auto"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1.5,pb:1.2,borderBottom:`1px solid ${d}`,flexShrink:0},children:[e.jsx(l,{variant:"h6",fontWeight:600,color:m,children:"Withdrawal Summary"}),e.jsx(j,{title:"Summary information",children:e.jsx(k,{size:"small",onClick:n=>g(n,ze),sx:{color:a,p:.3,"&:hover":{bgcolor:o(a,.1)}},children:e.jsx(S,{fontSize:"small"})})})]}),e.jsxs(s,{sx:{flex:1,overflow:"auto",pr:r?.5:0,"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:d,borderRadius:"2px"}},children:[e.jsxs(s,{sx:{mb:1.5,p:1.2,borderRadius:1.2,bgcolor:Le,border:`1px solid ${$e}`,textAlign:"center"},children:[e.jsx(l,{variant:"caption",color:c,sx:{mb:.3,display:"block",fontSize:r?"0.75rem":"0.8rem"},children:"Withdrawal Amount"}),e.jsxs(l,{variant:r?"h4":"h3",fontWeight:700,color:a,children:["$",Te]}),e.jsx(l,{variant:"caption",color:c,sx:{fontSize:r?"0.75rem":"0.8rem"},children:W?"USD":"Enter amount"})]}),e.jsxs(s,{sx:{mb:1.5},children:[e.jsx(l,{variant:"subtitle2",fontWeight:600,color:c,sx:{mb:1.2,fontSize:r?"0.85rem":"0.9rem"},children:"Details"}),e.jsxs(y,{spacing:1.2,children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:c,sx:{fontSize:r?"0.8rem":"0.85rem"},children:"Security Method:"}),e.jsx(w,{label:i==="GOOGLE-AUTH"?"Google Auth":"Email/SMS",size:"small",sx:{fontSize:"0.65rem",height:22,backgroundColor:i==="GOOGLE-AUTH"?Y:R,border:`1px solid ${i==="GOOGLE-AUTH"?_:U}`,color:i==="GOOGLE-AUTH"?"#4caf50":t.primaryBlue}})]}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:c,sx:{fontSize:r?"0.8rem":"0.85rem"},children:"Remarks:"}),e.jsx(l,{variant:"body2",fontWeight:500,color:m,sx:{textAlign:"right",maxWidth:"60%",fontSize:r?"0.8rem":"0.85rem",wordBreak:"break-word"},children:T("remark")||z||"Not provided"})]}),e.jsx(or,{sx:{borderColor:d}}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:c,sx:{fontSize:r?"0.8rem":"0.85rem"},children:"Processing:"}),e.jsx(w,{label:"1-3 days",size:"small",sx:{fontSize:"0.65rem",height:22,backgroundColor:R,border:`1px solid ${U}`,color:t.primaryBlue}})]}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:c,sx:{fontSize:r?"0.8rem":"0.85rem"},children:"Status:"}),e.jsx(w,{label:"Pending",size:"small",sx:{fontSize:"0.65rem",height:22,backgroundColor:ee,border:`1px solid ${re}`,color:"#ff9800"}})]})]})]}),e.jsx(ue,{sx:{p:1,borderRadius:1.2,backgroundColor:K,border:`1px solid ${X}`,mb:1.5},children:e.jsxs(s,{sx:{display:"flex",gap:.8,alignItems:"flex-start"},children:[e.jsx("i",{style:{fontSize:r?"0.85rem":"0.9rem",color:t.primaryBlue,fontWeight:"bold",flexShrink:0,marginTop:"2px"},children:"ⓘ"}),e.jsxs(s,{children:[e.jsx(l,{variant:"caption",fontWeight:500,color:m,sx:{mb:.2,display:"block",fontSize:r?"0.75rem":"0.8rem"},children:"Important Information"}),e.jsx(l,{variant:"caption",color:c,sx:{fontSize:r?"0.7rem":"0.75rem",lineHeight:1.2},children:"Funds will be processed within 1-3 business days after verification. Make sure your bank account details are correct."})]})]})}),e.jsx(ue,{sx:{p:1,borderRadius:1.2,backgroundColor:We,border:`1px solid ${Re}`},children:e.jsxs(l,{variant:"caption",color:c,sx:{fontSize:r?"0.7rem":"0.75rem",lineHeight:1.2},children:[e.jsx("i",{style:{marginRight:"4px",color:"#ff9800"},children:"⚠️"}),"By submitting, you confirm this withdrawal request to your registered bank account. Ensure all details are accurate."]})})]})]})]})]})]})})}export{br as default};
