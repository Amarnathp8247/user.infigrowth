import{p as x,j as r,a6 as N,bk as J,a7 as k,a as q,r as O,a8 as Y,a9 as K,bz as Q,S as c,A as X,t as o,B as t,V as m,W as v,f as w,T as n,bA as Z,y as D,I as _,U as ee,aI as re,s as p}from"./index-D1uGZ479.js";import{A as oe}from"./AttachMoney-Cd4P9nZH.js";import{C as te}from"./CloudUpload-DSVq5eZc.js";import{C as ne}from"./CheckCircle-FNLtkmtk.js";import{E as ae}from"./ErrorOutline-BvOypDnk.js";import{P as ie,I as se}from"./PictureAsPdf-XRyTkXkE.js";const le=x(r.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),ce=x(r.jsx("path",{d:"M3 18h12v-2H3zM3 6v2h18V6zm0 7h18v-2H3z"}),"Notes"),de=x(r.jsx("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"}),"Receipt"),ue=x(r.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"}),"UploadFile"),me=N({transactionReference:k().min(1,"Please type transaction Reference").min(3,"Transaction Reference must be at least 3 characters long"),amount:k().min(2,"Please type your deposit amount"),remark:k().trim().min(1,"Please type your remark").min(3,"Remark must be at least 3 characters long"),image:J(File,{message:"Please upload a valid image file"}).refine(a=>a&&["image/jpeg","image/png"].includes(a.type),{message:"Only JPEG or PNG images are allowed"}).refine(a=>a&&a.size<=5*1024*1024,{message:"Image size must not exceed 5MB"})}),e={background:"#121212",textPrimary:"#ffffff",textSecondary:"#b0b0b0",textDisabled:"#666666",border:"#333333",primary:"#7E6233",primaryDark:"#5A4724",info:"#2196f3",success:"#4caf50",error:"#f44336",white:"#ffffff"},pe=Z("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function je(){var z,M,P,R;const a=q(),[F,h]=O.useState(null),[C,g]=O.useState(""),I={transactionReference:"",amount:"",remark:"",image:null},{register:b,handleSubmit:L,reset:W,watch:A,setValue:S,formState:{errors:l,isValid:T}}=Y({resolver:K(me),defaultValues:I,mode:"onChange"}),[V,{isLoading:f,isError:E,error:u}]=Q(),H=async d=>{var s,j;try{const i=await V(d).unwrap();i!=null&&i.status&&(a(p({open:!0,message:"Deposit request submitted successfully!",severity:"success"})),W(I),h(null),g(""))}catch(i){(s=i==null?void 0:i.data)!=null&&s.status||a(p({open:!0,message:((j=i==null?void 0:i.data)==null?void 0:j.message)||"Failed to submit. Please try again.",severity:"error"}))}},y=A("amount"),B=y?parseFloat(y).toFixed(2):"0.00",U=d=>{const s=d.target.files[0];if(s){if(s.size>5*1024*1024){a(p({open:!0,message:"File size should be less than 5MB",severity:"error"}));return}if(!["image/jpeg","image/png","application/pdf"].includes(s.type)){a(p({open:!0,message:"Only JPEG, PNG, and PDF files are allowed",severity:"error"}));return}h(URL.createObjectURL(s)),g(s.name),S("image",s,{shouldValidate:!0})}},G=()=>{h(null),g(""),S("image",null,{shouldValidate:!0})},$=d=>d!=null&&d.toLowerCase().endsWith(".pdf")?r.jsx(ie,{sx:{color:e.error}}):r.jsx(se,{sx:{color:e.primary}});return r.jsxs(c,{component:"form",onSubmit:L(H),spacing:3,children:[E&&((z=u==null?void 0:u.data)==null?void 0:z.message)&&r.jsx(X,{severity:"error",sx:{borderRadius:2,backgroundColor:o(e.error,.1),color:e.textPrimary,border:`1px solid ${o(e.error,.3)}`,"& .MuiAlert-icon":{alignItems:"center",color:e.error}},icon:r.jsx(ae,{}),children:u.data.message}),r.jsxs(t,{children:[r.jsxs(c,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:1.5},children:[r.jsx(t,{sx:{p:.5,borderRadius:1,backgroundColor:o(e.primary,.1),display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(oe,{sx:{color:e.primary,fontSize:"1.25rem"}})}),r.jsx(m,{sx:{fontWeight:600,color:e.textPrimary,fontSize:"0.875rem"},children:"Amount (USD) *"})]}),r.jsx(v,{...b("amount"),size:"small",fullWidth:!0,placeholder:"Enter amount in USD",variant:"outlined",type:"number",inputProps:{min:0,step:"0.01"},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:o(e.background,.5),"&:hover":{backgroundColor:o(e.background,.7)},"&.Mui-focused":{backgroundColor:o(e.background,.8)},"& input":{color:e.textPrimary}},"& .MuiOutlinedInput-notchedOutline":{borderColor:e.border},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:e.primary},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e.primary}},error:!!l.amount,helperText:(M=l.amount)==null?void 0:M.message})]}),r.jsxs(t,{children:[r.jsxs(c,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:1.5},children:[r.jsx(t,{sx:{p:.5,borderRadius:1,backgroundColor:o(e.primary,.1),display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(ue,{sx:{color:e.primary,fontSize:"1.25rem"}})}),r.jsx(m,{sx:{fontWeight:600,color:e.textPrimary,fontSize:"0.875rem"},children:"Upload Deposit Proof *"})]}),F?r.jsx(D,{elevation:0,sx:{p:2.5,borderRadius:2,border:`1px solid ${o(e.success,.4)}`,backgroundColor:o(e.background,.3)},children:r.jsxs(c,{direction:"row",alignItems:"center",spacing:2,children:[$(C),r.jsxs(t,{sx:{flexGrow:1,minWidth:0},children:[r.jsx(n,{variant:"body2",fontWeight:500,color:e.textPrimary,noWrap:!0,children:C}),r.jsx(n,{variant:"caption",color:e.success,children:"File uploaded successfully"})]}),r.jsx(_,{size:"small",onClick:G,sx:{color:e.error,backgroundColor:o(e.error,.1),"&:hover":{backgroundColor:o(e.error,.2)}},children:r.jsx(le,{})})]})}):r.jsx(t,{children:r.jsxs(w,{component:"label",variant:"outlined",fullWidth:!0,sx:{py:3,borderRadius:2,border:`2px dashed ${o(e.primary,.4)}`,backgroundColor:o(e.background,.3),"&:hover":{border:`2px dashed ${e.primary}`,backgroundColor:o(e.primary,.1)}},children:[r.jsxs(c,{alignItems:"center",spacing:2,children:[r.jsx(te,{sx:{fontSize:48,color:e.primary,opacity:.8}}),r.jsxs(t,{sx:{textAlign:"center"},children:[r.jsx(n,{variant:"subtitle1",fontWeight:600,color:e.textPrimary,children:"Click to upload"}),r.jsx(n,{variant:"caption",color:e.textSecondary,sx:{mt:.5},children:"Supported formats: JPG, PNG, PDF (Max 5MB)"})]})]}),r.jsx(pe,{type:"file",onChange:U,accept:"image/jpeg,image/png,application/pdf"})]})}),l.image&&r.jsx(n,{color:"error",variant:"caption",sx:{mt:1.5,display:"block"},children:l.image.message})]}),r.jsxs(t,{children:[r.jsxs(c,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:1.5},children:[r.jsx(t,{sx:{p:.5,borderRadius:1,backgroundColor:o(e.primary,.1),display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(de,{sx:{color:e.primary,fontSize:"1.25rem"}})}),r.jsx(m,{sx:{fontWeight:600,color:e.textPrimary,fontSize:"0.875rem"},children:"Transaction Reference *"})]}),r.jsx(v,{...b("transactionReference"),size:"small",fullWidth:!0,placeholder:"Enter bank transaction reference number",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:o(e.background,.5),"&:hover":{backgroundColor:o(e.background,.7)},"&.Mui-focused":{backgroundColor:o(e.background,.8)},"& input":{color:e.textPrimary}},"& .MuiOutlinedInput-notchedOutline":{borderColor:e.border},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:e.primary},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e.primary}},error:!!l.transactionReference,helperText:(P=l.transactionReference)==null?void 0:P.message})]}),r.jsxs(t,{children:[r.jsxs(c,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:1.5},children:[r.jsx(t,{sx:{p:.5,borderRadius:1,backgroundColor:o(e.primary,.1),display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(ce,{sx:{color:e.primary,fontSize:"1.25rem"}})}),r.jsx(m,{sx:{fontWeight:600,color:e.textPrimary,fontSize:"0.875rem"},children:"Remarks *"})]}),r.jsx(v,{...b("remark"),size:"small",multiline:!0,rows:4,fullWidth:!0,placeholder:"Enter any additional notes or remarks about this deposit...",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:o(e.background,.5),"&:hover":{backgroundColor:o(e.background,.7)},"&.Mui-focused":{backgroundColor:o(e.background,.8)},"& textarea":{color:e.textPrimary}},"& .MuiOutlinedInput-notchedOutline":{borderColor:e.border},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:e.primary},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e.primary}},error:!!l.remark,helperText:(R=l.remark)==null?void 0:R.message})]}),r.jsxs(D,{elevation:0,sx:{p:3,borderRadius:2,border:`2px solid ${o(e.primary,.3)}`,backgroundColor:o(e.background,.5),mt:1},children:[r.jsx(n,{variant:"subtitle2",fontWeight:600,color:e.textSecondary,gutterBottom:!0,children:"Deposit Summary"}),r.jsx(ee,{sx:{my:2,backgroundColor:e.border}}),r.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[r.jsx(n,{variant:"body1",color:e.textSecondary,children:"Amount to be deposited:"}),r.jsxs(t,{sx:{textAlign:"right"},children:[r.jsxs(n,{variant:"h4",fontWeight:700,color:e.primary,children:["$",B]}),r.jsx(n,{variant:"caption",color:e.textSecondary,children:y?"USD":"Enter amount above"})]})]}),r.jsx(t,{sx:{mt:2,p:1.5,borderRadius:1,backgroundColor:o(e.info,.08),border:`1px solid ${o(e.info,.2)}`},children:r.jsx(n,{variant:"caption",color:e.textSecondary,children:"Funds will be credited to your account within 1-3 business days after verification."})})]}),r.jsxs(t,{sx:{mt:1},children:[r.jsx(w,{type:"submit",variant:"contained",disabled:f||!T,fullWidth:!0,size:"large",startIcon:f?r.jsx(re,{size:20,color:"inherit"}):r.jsx(ne,{}),sx:{textTransform:"none",borderRadius:2,py:1.75,fontSize:"1rem",fontWeight:600,backgroundColor:e.primary,color:e.white,boxShadow:"0 4px 12px rgba(0,0,0,0.3)","&:hover":{backgroundColor:e.primaryDark,boxShadow:"0 6px 16px rgba(0,0,0,0.4)",transform:"translateY(-2px)"},"&:disabled":{backgroundColor:o(e.textDisabled,.5),color:o(e.textPrimary,.5),opacity:.7}},children:f?"Submitting...":"Submit Deposit Request"}),r.jsx(n,{variant:"caption",color:e.textSecondary,sx:{mt:2,display:"block",textAlign:"center",lineHeight:1.5},children:"By submitting, you confirm that you have deposited the exact amount to the provided bank account."})]})]})}export{je as default};
